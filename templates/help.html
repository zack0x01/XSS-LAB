{% extends "base.html" %}

{% block title %}Help & Support{% endblock %}

{% block content %}
<div class="card">
    <h1>Help & Support</h1>
    <p>Welcome to our help center. Find answers to common questions and get support.</p>
    
    <h2>Frequently Asked Questions</h2>
    <div style="margin: 20px 0;">
        <p>Browse our knowledge base or search for specific topics.</p>
        
        {% if search_query %}
        <div style="margin-top: 20px; padding: 15px; background: #0d1117; border-radius: 6px;">
            <p><strong>Search Results for:</strong></p>
            {# VULNERABLE: Directly rendering URL parameter without sanitization #}
            <div style="color: #58a6ff; font-size: 18px; margin-top: 10px;">{{ search_query|safe }}</div>
        </div>
        {% else %}
        <div style="margin-top: 20px; padding: 15px; background: #0d1117; border-radius: 6px;">
            <p>Use the search parameter <code>?q=your-search-term</code> to find specific help articles.</p>
        </div>
        {% endif %}
        
        {% if url_param %}
        <div style="margin-top: 20px; padding: 15px; background: #0d1117; border-radius: 6px;">
            <p><strong>External Resource:</strong></p>
            {# VULNERABLE: Directly rendering URL parameter without sanitization #}
            <div style="margin-top: 10px;">{{ url_param|safe }}</div>
        </div>
        {% endif %}
        
        {% if redirect_url %}
        <div style="margin-top: 20px; padding: 15px; background: #0d1117; border-radius: 6px;">
            <p><strong>Redirecting to:</strong></p>
            {# VULNERABLE: Directly rendering URL parameter without sanitization #}
            <div style="margin-top: 10px;">{{ redirect_url|safe }}</div>
        </div>
        {% endif %}
        
        {% if page %}
        <div style="margin-top: 20px; padding: 15px; background: #0d1117; border-radius: 6px;">
            <p><strong>Page Content:</strong></p>
            {# VULNERABLE: Directly rendering URL parameter without sanitization #}
            <div style="margin-top: 10px;">{{ page|safe }}</div>
        </div>
        {% endif %}
        
        {% if help_html %}
        <div style="margin-top: 30px;">
            <h2>Help Documentation</h2>
            <p style="margin-bottom: 15px;">Loading help documentation from: <code style="color: #58a6ff;">{{ help_html }}</code></p>
            {# VULNERABLE: Directly using URL parameter in iframe src without sanitization #}
            <iframe src="{{ help_html }}" style="width: 100%; height: 500px; border: 1px solid #30363d; border-radius: 6px;"></iframe>
            <div style="margin-top: 10px; padding: 10px; background: #0d1117; border-radius: 6px; font-size: 12px; color: #8b949e;">
                Iframe source: <span style="color: #c9d1d9;">{{ help_html|safe }}</span>
            </div>
        </div>
        {% endif %}
    </div>
    
    <h2>Popular Articles</h2>
    <ul style="margin-left: 20px; margin-top: 15px;">
        <li><a href="/help?q=getting-started" style="color: #58a6ff;">Getting Started Guide</a></li>
        <li><a href="/help?q=account-settings" style="color: #58a6ff;">Account Settings</a></li>
        <li><a href="/help?q=billing" style="color: #58a6ff;">Billing & Payments</a></li>
        <li><a href="/help?q=troubleshooting" style="color: #58a6ff;">Troubleshooting</a></li>
        <li><a href="/help?help.html" style="color: #58a6ff;">View Help Documentation</a></li>
    </ul>
    
    <h2 style="margin-top: 30px;">Contact Support</h2>
    <p>If you need additional assistance, please contact our support team at support@example.com</p>
</div>
{% endblock %}

